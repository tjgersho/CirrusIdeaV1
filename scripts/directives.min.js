!function(){function e(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var r=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,o=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(o,"").replace(r,function(e,r){return t.indexOf("<"+r.toLowerCase()+">")>-1?e:""})}function t(e){return"undefined"==typeof e||null===e||""===e?!0:"number"==typeof e&&isNaN(e)?!0:e instanceof Date&&isNaN(Number(e))?!0:!1}var r=angular.module("CirrusIdea");r.directive("cirrusContent",["$http","$routeParams","UserService",function(e,t,r){return{restrict:"E",templateUrl:"views/cirruscontent.php",controller:["$http","$routeParams","UserService",function(e,t,r){var o=this;o.progress=0,o.loggedin=r.isLoggedIn}],controllerAs:"cirrusContentCtrl"}}]),r.directive("cirrusNavbar",["$http","$routeParams","UserService",function(e,t,r){return{restrict:"E",templateUrl:"views/cirrusnavbar.php",controller:["$http","$routeParams","UserService",function(e,t,r){var o=this;o.loggedin=r.isLoggedIn}],controllerAs:"cirrusNavCtrl"}}]),r.directive("cirrusSearch",["$http","$routeParams","$location","UserService",function(e,t,r,o){return{restrict:"E",templateUrl:"views/cirrussearch.php",controller:["$http","$routeParams","$location","UserService",function(e,t,r,o){var a=this;a.loggedin=o.isLoggedIn,a.searchterm="",a.search=function(){""!==a.searchterm&&($(".navbar-collapse").collapse("hide"),r.path("/search"),r.search("search",a.searchterm),r.replace(),a.searchterm="")},a.searchkeypress=function(e){13===e.keyCode&&a.search()}}],controllerAs:"cirrusSearchCtrl"}}]),r.directive("viewableBy",["$http","$routeParams",function(e,t){return{restrict:"E",templateUrl:"views/viewableby.php",controller:["$http","$routeParams","UserService",function(e,t,r){var o=this;o.path=t.path,o.page=t.page,o.ideadata={},o.getViewableByMembers=function(t,r){e.post("api/folderprivate/",{path:t,page:r,getlistofmembers:1}).then(function(e){$("#viewablebydiv").show(),o.ideadata=e.data},function(e){})},o.getViewableByMembers(t.path,t.page)}],controllerAs:"viewableByCtrl"}}]),r.directive("cirrusideaProjectdata",["$http","$routeParams",function(e,t){return{restrict:"E",templateUrl:"views/projectdata.php",controller:["$http","$routeParams","UserService",function(e,t,r){var o=this;o.path=t.path,o.page=t.page}],controllerAs:"projectdataCtrl"}}]),r.directive("cirrusideaPayoutstats",["$http","$routeParams",function(e,t){return{restrict:"E",templateUrl:"views/payoutstats.php",controller:["$http","$routeParams","UserService",function(e,t,r){var o=this;o.path=t.path,o.page=t.page}],controllerAs:"projectdataCtrl"}}]),r.directive("cirrusFooter",["$http","$routeParams","UserService",function(t,r,o){return{restrict:"E",templateUrl:"views/cirrusfooter.php",controller:["$http","UserService",function(t,o){var a=this;a.path=r.path,a.page=r.page,a.loggedin=o.isLoggedIn,a.refreshCaptcha=function(){var e=document.images.shoutout_captchaimg;e.src=e.src.substring(0,e.src.lastIndexOf("?"))+"?rand="+1e3*Math.random()},a.shoutouterr={},a.shoutouterr.captcha_errmsg="",a.shoutouterr.email_errmsg="",a.shoutouterr.yourname_errmsg="",a.shoutouterr.youremail_errmsg="",a.shoutoutdialogopen=function(){a.refreshCaptcha(),$("#TellAFriend").modal("toggle")},a.shoutout={},a.shoutout=function(){var r=$("#shoutout_message").val().replace(/\'/g,"&#39;");r=r.replace(/\"/g,"&quot;"),r=e(r);var o={shoutOutemail:a.shoutout.friends_email,shoutOutmsg:r,shoutOutcaptcha:a.shoutout.captcha,shoutOutyourname:a.shoutout.your_name,shoutOutyouremail:a.shoutout.your_email};t.post("api/shoutout/",o).then(function(e){$("#TellAFriend").modal("toggle"),$("#shoutout_friends_email").val(""),a.shoutout.captcha=null,a.shoutouterr.email_errmsg="",a.shoutouterr.captcha_errmsg=""},function(e){a.shoutouterr=e.data,a.shoutout.captcha=null,a.refreshCaptcha()})}}],controllerAs:"cirrusFooterCtrl"}}]),r.directive("browseIdeas",["$http","$routeParams","UserService","$window","$sce",function(t,r,o,a,i){return{restrict:"E",templateUrl:"views/browseideas.php",controller:["$http","$routeParams","UserService","$window","$sce",function(t,r,o,a,i){var n=this;n.loggedin=o.isLoggedIn,n.path=r.path,n.page=r.page,n.ideaprivate=!1,n.newIdea="",n.error1=!1,n.modalprivate=function(){n.ideaprivate?$("#AddCategory").data("bs.modal").$backdrop.css("background-color","blue"):$("#AddCategory").data("bs.modal").$backdrop.css("background-color","black")},n.submit=function(){n.categories.current=0,n.newIdea=e(n.newIdea),t.post("api/categories/",{idea:n.newIdea,file_private:n.ideaprivate}).then(function(e){n.categories.current=0,n.getCats(),$("#AddCategory").modal("toggle"),n.newIdea="",n.ideaprivate=!1,n.error1=!1,n.error2=!1},function(e){1===e.data.msg?(n.error1=!0,n.error2=!1):2===e.data.msg&&(n.error2=!0,n.error1=!1)})},n.close=function(){$("#newIdea").val(""),n.newIdea="",$("#momentvalue").val(""),n.ideaprivate=!1},n.categories={},n.getCats=function(){t.get("api/categories/").then(function(e){n.categories=e.data},function(e){})},n.getCats(),n.currentDelID,n.deleteCategoryPopup=function(e){n.currentDelID=e,$("#DeleteCategory").modal("toggle")},n.deleteCategory=function(e){t.post("api/categories/",{file_id:e,"delete":1}).then(function(e){n.getCats(),$("#DeleteCategory").modal("toggle")},function(e){$("#DeleteCategory").modal("toggle"),$("#ErrorModal").modal("toggle"),$("#ErrorMsg").html(e.data.msg)})},n.ddclassobj={"dropdown-menu":1,"dropdown-menu-left":1,"dropdown-menu-right":0},n.dropdownclick=function(e){var t=a.innerWidth,r=e.clientX;r>.55*t?n.ddclassobj={"dropdown-menu":1,"dropdown-menu-left":0,"dropdown-menu-right":1}:n.ddclassobj={"dropdown-menu":1,"dropdown-menu-left":1,"dropdown-menu-right":0}}}],controllerAs:"browseIdeasCtrl"}}]),r.directive("cirrusThoughts",["$http","$routeParams","UserService","$location","$sce","$window","ThoughtOrderByService","formDataObject",function(r,o,a,i,n,h,s,u){return{restrict:"E",priority:30,templateUrl:"views/thoughts.php",controller:["$scope","$http","$routeParams","UserService","$location","$sce","$window","ThoughtOrderByService","formDataObject",function(r,o,a,i,n,h,s,u,c){var l=this;l.loggedin=i.isLoggedIn,i.session().then(function(e){l.viewerusername=e.data.username,l.vieweruser_id=e.data.user_id},function(e){}),l.cirrusGallery=[],l.videoplayer=0,l.setvideoplayer=function(e){l.videoplayer=e},l.path=a.path,l.urlpath=encodeURI(l.path),l.page=a.page,l.urlpage=encodeURI(l.page),l.focusThoughtID=a.tid,l.specialpath=l.path.replace("files","CirrusIdeas"),l.ideaprivate=!1,l.openAddThought=function(){$("#AddThought").modal("toggle"),l.ideaprivate?$("#AddThought").data("bs.modal").$backdrop.css("background-color","blue"):$("#AddThought").data("bs.modal").$backdrop.css("background-color","black")},o.post("api/folderprivate/",{path:l.path,page:l.page}).then(function(e){l.ideaprivate=!1},function(e){l.ideaprivate=!0}),l.userFile,l.formokay=function(){var e=t(l.userFile),r=t(l.newThought);return e&&r?!1:!0},l.submit=function(){var t=$("#newthought").fieldValue()[0];t=t.replace(/http:\/\//gi,"HTTPPROTOCOL234234"),t=t.replace(/https:\/\//gi,"HTTPPROTOCOLsss234234"),t=e(t,"<a><b><i><br>"),$("#newthought").val(t),$("#loader-icon").show(),$("#addthoughtForm").ajaxSubmit({url:"api/uploader/",method:"POST",beforeSubmit:function(){$("#fileUploadProgress").width("0%"),$("#uploadProgressContainer").show()},uploadProgress:function(e,t,r,o){$("#fileUploadProgress").width(o+"%"),$("#fileUploadProgress").html('<div id="progress-status">'+o+" %</div>")},success:function(e){l.getThoughts("/"+a.path,a.page,"date DESC",1),l.userFile=[],$("#loader-icon").hide(),$("#AddThought").modal("toggle"),$("#fileUploadProgress").width("0%"),$("#uploadProgressContainer").hide()},error:function(e){},clearForm:!0,resetForm:!0})},l.currentDelId,l.deleteThoughtDialogbtn=function(e){l.currentDelId=e,$("#DeleteThought").modal("toggle")},l.deleteThought=function(e){o.post("api/deletethought/",{thought_id:e}).then(function(e){l.getThoughts("/"+a.path,a.page,u.getThoughtOrder(),l.showPag),$("#DeleteThought").modal("toggle")},function(e){})},l.thoughts={},l.thoughtPage=function(){return"undefined"!=typeof l.thoughts.thoughtarray?l.thoughts.thoughtarray[l.thoughts.thoughtarray.length].id:0},l.getThoughts=function(e,t,r,a){$(".LoadOrdering").show(),null!==l.focusThoughtID?o.post("api/getthoughtviewpage/",{path:e,page:t,order:r,focusthought_id:l.focusThoughtID,get:1}).then(function(i){a=Number(i.data),l.showPag=a,l.activePag(l.showPag),o.post("api/thoughts/",{path:e,page:t,order:r,whichpage:a,get:1}).then(function(e){l.thoughts=e.data;for(thought in l.thoughts.thoughtarray){var t=l.thoughts.thoughtarray[thought].date.split(/[- :]/),r=new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5]);l.thoughts.thoughtarray[thought].date=r;for(com in l.thoughts.thoughtarray[thought].thoughtcomments){var o=l.thoughts.thoughtarray[thought].thoughtcomments[com].com_date.split(/[- :]/),a=new Date(o[0],o[1]-1,o[2],o[3],o[4],o[5]);l.thoughts.thoughtarray[thought].thoughtcomments[com].com_date=a}}if(l.thoughts.showcase)for(var i=0,n=0;n<l.thoughts.thoughtarray.length;n++)l.thoughts.thoughtarray[n].gallery&&"undefined"!==l.thoughts.thoughtarray[n].gallery&&(l.cirrusGallery[i]={file:l.thoughts.thoughtarray[n].gallery,fname:l.thoughts.thoughtarray[n].file_name,headline:l.thoughts.thoughtarray[n].headline.substr(0,40)},i++);"undefined"!==l.focusThoughtID&&setTimeout(function(){$("html, body").animate({scrollTop:$("#thought_id_"+l.focusThoughtID).offset().top-100+"px"},"slow")},2e3),$(".LoadOrdering").hide()},function(e){})},function(i){o.post("api/thoughts/",{path:e,page:t,order:r,whichpage:a,get:1}).then(function(e){l.thoughts=e.data;for(thought in l.thoughts.thoughtarray){var t=l.thoughts.thoughtarray[thought].date.split(/[- :]/),r=new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5]);l.thoughts.thoughtarray[thought].date=r;for(com in l.thoughts.thoughtarray[thought].thoughtcomments){var o=l.thoughts.thoughtarray[thought].thoughtcomments[com].com_date.split(/[- :]/),a=new Date(o[0],o[1]-1,o[2],o[3],o[4],o[5]);l.thoughts.thoughtarray[thought].thoughtcomments[com].com_date=a}}if(l.thoughts.showcase)for(var i=0,n=0;n<l.thoughts.thoughtarray.length;n++)l.thoughts.thoughtarray[n].gallery&&"undefined"!==l.thoughts.thoughtarray[n].gallery&&(l.cirrusGallery[i]={file:l.thoughts.thoughtarray[n].gallery,fname:l.thoughts.thoughtarray[n].file_name,headline:l.thoughts.thoughtarray[n].headline.substr(0,40)},i++);$(".LoadOrdering").hide()},function(e){})}):o.post("api/thoughts/",{path:e,page:t,order:r,whichpage:a,get:1}).then(function(e){l.thoughts=e.data;for(thought in l.thoughts.thoughtarray){var t=l.thoughts.thoughtarray[thought].date.split(/[- :]/),r=new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5]);l.thoughts.thoughtarray[thought].date=r;for(com in l.thoughts.thoughtarray[thought].thoughtcomments){var o=l.thoughts.thoughtarray[thought].thoughtcomments[com].com_date.split(/[- :]/),a=new Date(o[0],o[1]-1,o[2],o[3],o[4],o[5]);l.thoughts.thoughtarray[thought].thoughtcomments[com].com_date=a}}if(l.thoughts.showcase)for(var i=0,n=0;n<l.thoughts.thoughtarray.length;n++)l.thoughts.thoughtarray[n].gallery&&"undefined"!==l.thoughts.thoughtarray[n].gallery&&(l.cirrusGallery[i]={file:l.thoughts.thoughtarray[n].gallery,fname:l.thoughts.thoughtarray[n].file_name,headline:l.thoughts.thoughtarray[n].headline.substr(0,40)},i++);$(".LoadOrdering").hide()},function(e){})},l.commentthoughtformokay=function(e){var r=$("#thoughtCommentTextarea_"+e).val();return t(r)?!1:!0},l.addthoughtComment=function(e,t,r){var a=$(e.target).closest(".commentForm").find("textarea").val();$(".postcommenttextarea").empty(),"undefined"!=typeof l.thoughts.thoughtarray[r].thoughtcomments?l.thoughts.thoughtarray[r].thoughtcomments.unshift({com_date:new Date,comment:a,commenter_name:l.viewerusername}):(l.thoughts.thoughtarray[r].thoughtcomments=[],l.thoughts.thoughtarray[r].thoughtcomments[0]={com_date:new Date,comment:a,commenter_name:l.viewerusername}),o.post("api/thoughtcomment/",{thought_id:t,comment:a})},l.thoughtcomment_toggleIT=function(e){1===l.thoughts.thoughtarray[e].thoughtcomment_toggle?(l.thoughts.thoughtarray[e].thoughtcomment_toggle=0,l.thoughts.thoughtarray[e].thoughtcomment_togglestyle={"glyphicon glyphicon-plus":1,"glyphicon glyphicon-menu-up":0}):(l.thoughts.thoughtarray[e].thoughtcomment_toggle=1,l.thoughts.thoughtarray[e].thoughtcomment_togglestyle={"glyphicon glyphicon-plus":0,"glyphicon glyphicon-menu-up":1})},l.outofFocus=function(t,r){var a=$(t.target).data("id"),i=$(t.target).val();i=e(i,"<a><b><i><br>"),l.thoughts.thoughtarray[r].headline=i,i=i.replace(/http:\/\//gi,"HTTPPROTOCOL234234"),i=i.replace(/https:\/\//gi,"HTTPPROTOCOLsss234234"),o.post("api/editthought/",{thought_id:a,headline:i}).then(function(e){},function(e){})},l.addCred=function(e,t){l.thoughts.thoughtarray[t].credvote=!1;var r=Number(l.thoughts.thoughtarray[t].rating);l.thoughts.thoughtarray[t].rating=r+1;var a=(Number(l.thoughts.thoughtarray[t].percentratingstyle.width.replace(/%/,"")),l.thoughts.ideapeakrating);a>0?l.thoughts.thoughtarray[t].percentratingstyle.width=(r+1)/a*100+"%":l.thoughts.thoughtarray[t].percentratingstyle.width="100%",o.post("api/thoughtcred/",{thought_id:e,addcred:1})},l.subtractCred=function(e,t){l.thoughts.thoughtarray[t].credvote=!1;var r=Number(l.thoughts.thoughtarray[t].rating);l.thoughts.thoughtarray[t].rating=r-1;var a=(Number(l.thoughts.thoughtarray[t].percentratingstyle.width.replace(/%/,"")),l.thoughts.ideapeakrating);l.thoughts.thoughtarray[t].percentratingstyle.width=(r-1)/a*100+"%",o.post("api/thoughtcred/",{thought_id:e})},l.downloadThoughtFile=function(e){window.open("api/downloadFile/index.php?file="+e,"","left=10,screenX=10,toolbar=no,status=no,menubar=no,scrollbars=no,resizable=no,top=10, width=50, height=50")},l.thoughtOrder=u.getThoughtOrder(),l.showPag=1,l.getThoughts("/"+a.path,a.page,u.getThoughtOrder(),l.showPag),l.getThoughtsSpecial=function(e){void 0!==l.focusThoughtID&&null!==l.focusThoughtID&&""!==l.focusThoughtID&&(l.focusThoughtID=void 0),l.getThoughts("/"+a.path,a.page,u.getThoughtOrder(),e)},l.pagControl=function(e){return s.scroll(0,300),l.showPag=e,l.showPag},l.activePag=function(e){return e===l.showPag?{active:1}:{active:0}},l.setThoughtOrderby=function(e){$("#LoadOrdering").show();var t=u.getThoughtOrder();1===e?"date DESC"==t?u.setThoughtOrder("date ASC"):u.setThoughtOrder("date DESC"):"rating DESC"==t?u.setThoughtOrder("rating ASC"):u.setThoughtOrder("rating DESC"),l.getThoughts("/"+a.path,a.page,u.getThoughtOrder(),1)},l.getThoughtOrderClassSelected=function(e){var t=u.getThoughtOrder();return 1===e?"date DESC"==t||"date ASC"==t?{"glyphicon glyphicon-ok":1}:{"glyphicon glyphicon-remove":1}:"rating DESC"==t||"rating ASC"==t?{"glyphicon glyphicon-ok":1}:{"glyphicon glyphicon-remove":1}},l.getThoughtOrderClassDirection=function(e){var t=u.getThoughtOrder();switch(t){case"date DESC":if(1===e)return{"glyphicon glyphicon-triangle-bottom":1};break;case"date ASC":if(1===e)return{"glyphicon glyphicon-triangle-top":1};break;case"rating DESC":if(2===e)return{"glyphicon glyphicon-triangle-bottom":1};break;case"rating ASC":if(2===e)return{"glyphicon glyphicon-triangle-top":1};break;default:return{"glyphicon glyphicon-menu-left":0}}},l.runLightBox=function(e){l.galCurrent=0,$("#cirrusGalleryModal").find(".modal-dialog").css({margin:"0px",height:"auto","background-color":"black",width:"100%"}),$("#cirrusGalleryModal").find(".modal-body").css({padding:"2px","background-color":"#000000"}),$(".carousel-inner").css({width:"100%",margin:"2px",padding:"2px"}),$(".carousel-inner item").css({width:"100%",margin:"2px",padding:"2px"}),$(".carousel-inner img").css({"max-height":s.innerHeight-50,width:"auto"}),$(".carousel-caption").css("position","relative"),$(".carousel-indicators").css("position","relative"),$("#cirrusCarousel").carousel({interval:!1}),$("#cirrusGalleryModal").modal()},l.getActivePill=function(e){return e===l.galCurrent?{active:1}:{active:0}},l.goToSlide=function(e){l.galCurrent=e},l.galNext=function(){l.cirrusGallery.length-1===l.galCurrent?l.galCurrent=0:l.galCurrent=l.galCurrent+1},l.galPrev=function(){0===l.galCurrent?l.galCurrent=l.cirrusGallery.length-1:l.galCurrent=l.galCurrent-1},l.ShareWithCoDevs=[],l.getViewableByMembers=function(){o.post("api/listofCoDevstoShareWith/",{path:l.path,page:l.page,getlistofmembers:1}).then(function(e){l.ShareWithCoDevs=e.data,$("#shareCoDevSelect").select2()},function(e){})},l.getViewableByMembers(),l.sharethought_id,l.shareThoughtDialogbtn=function(e,t){l.sharethoughimage=!1,l.sharethoughtindex=t,"image"==l.thoughts.thoughtarray[t].file_type?l.sharethoughimage=!0:l.sharethoughimage=!1,l.sharethought_id=e,$("#shareCoDevSelect").select2(),$("#ShareThought").modal("toggle")},l.submitshareThought=function(t,r){if(t===l.sharethought_id){var a=$("#shareCommentTxtArea").val(),i=a.replace(/\'/g,"&#39;");i=i.replace(/\"/g,"&quot;"),i=e(i),o.post("api/sharethought/",{tht_id:t}).then(function(e){var t="";t+="Just wanted to share this thought with you!",t+="<br /><br /><b>Note:</b> "+i+"<br />",null!==e.data.thought&&""!==e.data.thought&&(t+="<br /><b>Thought:</b> "+e.data.thought+"<br />"),null!==e.data.file_name&&""!==e.data.file_name&&(t+='<br /><a href="http://cirrusidea.com/'+e.data.path+'" target="_blank">File: '+e.data.file_name+"</a>"),t+='<br /><br /> <a href="http://cirrusidea.com/#!/cirrus/path/'+l.path+"/page/"+l.page+"/tid/"+e.data.id+'">Idea Link</a>',t=t.replace("'","&#39;");var a={comment:t,post_member_id:l.vieweruser_id,to_member_name:r,codeok:1};o.post("api/chat/",a).then(function(e){$("#ShareThought").modal("toggle"),$("#shareCommentTxtArea").val(null),$("#shareCoDevSelect").val(null).trigger("change"),$("#shareCoDevSelect").select2()},function(e){})},function(e){})}else $("#ShareThought").modal("toggle")},l.reportthought_id,l.reportThoughtDialogbtn=function(e){l.reportthought_id=e,$("#ReportThought").modal("toggle")},l.submitreportThought=function(t,r){if(t===l.reportthought_id){var a=$("#reportCommentTxtArea").val(),i=a.replace(/\'/g,"&#39;");i=i.replace(/\"/g,"&quot;"),i=e(i),o.post("api/sharethought/",{tht_id:t}).then(function(e){var t="";t+="<b>"+l.viewerusername+"</b> is reporting a thought as Malice!",t+="<br /><br /><b>Note:</b> "+i+"<br />",null!==e.data.thought&&""!==e.data.thought&&(t+="<br /><b>Thought:</b> "+e.data.thought+"<br />"),null!==e.data.file_name&&""!==e.data.file_name&&(t+='<br /><a href="http://www.cirrusdea.com/'+e.data.path+'" target="_blank">File: '+e.data.file_name+"</a>"),t+='<br /><br /> <a href="#/cirrus/path/'+l.path+"/page/"+l.page+"/tid/"+e.data.id+'">Idea Link</a>';var a={comment:t,post_member_id:l.vieweruser_id,to_member_name:[r],codeok:1};o.post("api/chat/",a).then(function(e){$("#ReportThought").modal("toggle"),$("#reportCommentTxtArea").val(null)},function(e){})},function(e){})}else $("#ReportThought").modal("toggle")},s.addEventListener("orientationchange",function(){$("#cirrusGalleryModal").find(".modal-dialog").css({margin:"0px",height:"auto","background-color":"black",width:"100%"}),$("#cirrusGalleryModal").find(".modal-body").css({padding:"2px","background-color":"#000000"}),$(".carousel-inner").css({width:"100%",margin:"2px",padding:"2px"}),$(".carousel-inner item").css({width:"100%",margin:"2px",padding:"2px"}),$(".carousel-inner img").css({"max-height":s.innerHeight-50,width:"auto"}),$(".carousel-caption").css("position","relative"),$(".carousel-indicators").css("position","relative"),$("#cirrusCarousel").carousel({interval:!1})},!1)}],controllerAs:"thoughtCtrl"}}]),r.directive("cirrusTextarea",["$http",function(e){return{priority:10,restrict:"A",controller:["$scope","$element","$attrs","$http",function(e,t,r,o){var a=this,i=$(t),n=$(document.createElement("div")),h=null;n.css("width",i.width()+"px"),n.addClass("hiddendiv"),$("body").append(n),h=e.thought.headline,h=h.replace(/\n/g,"<br />"),n.html(h),$(t).css("height",n.height()+50+"px"),a.txtkeyup=function(e){h=$(e.target).val(),h=h.replace(/\n/g,"<br />"),n.css("width",$(e.target).width()+"px"),n.html(h),$(e.target).css("height",n.height()+50+"px")},a.outofFocus=function(e){var t=$(e.target).data("id"),r=$(e.target).val();o.post("api/editthought/",{thought_id:t,headline:r}).then(function(e){},function(e){})}}],controllerAs:"textareaCtrl"}}]),r.directive("cirrusAddtextarea",[function(){return{priority:10,restrict:"A",controller:["$scope","$element","$attrs",function(e,t,r){var o=this,a=$(t),i=$(document.createElement("div"));i.addClass("hiddendiv");var n=null;i.css("width",a.width()+"px"),$(t).css("height",i.height()+50+"px"),$("body").append(i),o.txtkeyup=function(e){n=$(e.target).val(),i.css("width",$(e.target).width()+"px"),n=n.replace(/\n/g,"<br />"),i.html(n),$(e.target).css("height",i.height()+50+"px")}}],controllerAs:"addtextareaCtrl"}}]),r.directive("fileread",[function(){return{scope:{fileread:"="},link:function(e,t,r){t.bind("change",function(t){e.$apply(function(){e.fileread=t.target.files})})}}}]),r.directive("thoughtPagination",["$http","$routeParams","UserService",function(e,t,r){return{restrict:"E",templateUrl:"views/thoughtpag.php",controller:["$http","UserService",function(e,t){var r=this;r.loggedin=t.isLoggedIn}],controllerAs:"thoughtPagCtrl"}}]),r.directive("ownthoughtPagination",["$http","$routeParams","UserService",function(e,t,r){return{restrict:"E",templateUrl:"views/ownthoughtpag.php",controller:["$http","$routeParams","UserService",function(e,t,r){var o=this;o.loggedin=r.isLoggedIn}],controllerAs:"thoughtPagCtrl"}}]),r.directive("cirrusBreadcrumbs",["$http","$routeParams","UserService","$location","$sce",function(e,t,r,o,a){return{restrict:"E",templateUrl:"views/breadcrumbs.php",controller:["$http","$routeParams","UserService","$location","$sce",function(e,t,r,o,a){var i=this;i.links=[];var n=t.path;i.page=t.page;for(var h=n.split("/");h.length>1;){var s=h.splice(h.length-1,1).join("/");0===h.length?i.links.push({path:" ",page:s}):i.links.push({path:h.join("/"),page:s})}i.links.reverse()}],controllerAs:"breadcrumbCtrl"}}]),r.directive("cirrusSubfolders",["$http","$routeParams","UserService","$location","$sce","$window",function(t,r,o,a,i,n){return{restrict:"E",templateUrl:"views/ideaslist.php",controller:["$http","$routeParams","UserService","$location","$sce","$window",function(t,r,o,a,i,n){var h=this;h.path=r.path,h.page=r.page,h.specialpath=h.path.replace("files","CirrusIdeas"),h.ideaprivate=!1,h.newIdea="",h.error1=!1,h.modalprivate=function(){h.ideaprivate?$("#AddIdea").data("bs.modal").$backdrop.css("background-color","blue"):$("#AddIdea").data("bs.modal").$backdrop.css("background-color","black")},h.openAddIdea=function(){$("#AddIdea").modal("toggle"),h.ideaprivate?$("#AddIdea").data("bs.modal").$backdrop.css("background-color","blue"):$("#AddIdea").data("bs.modal").$backdrop.css("background-color","black")},h.submit=function(){h.ideas.current=0,h.newIdea=e(h.newIdea),t.post("api/ideas/",{idea:h.newIdea,path:"/"+h.path+"/"+h.page,file_private:h.ideaprivate,headline:h.headline,synopsis:h.synopsis,slogan:h.slogan,get:0}).then(function(e){h.ideas.current=0,h.getIdeas(),$("#AddIdea").modal("toggle"),h.newIdea="",h.error1=!1,h.error2=!1},function(e){1===e.data.msg?(h.error1=!0,h.error2=!1):2===e.data.msg&&(h.error2=!0,h.error1=!1)})},h.close=function(){$("#newIdea").val(""),h.newIdea="",$("#momentvalue").val("")},t.post("api/folderprivate/",{path:h.path,page:h.page}).then(function(e){h.ideaprivate=!1,h.privatedisabled=!1},function(e){h.ideaprivate=!0,h.privatedisabled=!0}),h.getIdeas=function(){t.post("api/ideas/",{path:"/"+r.path+"/"+r.page,get:1}).then(function(e){h.ideas=e.data})},h.getIdeas(),h.ddclassobj={"dropdown-menu":1,"dropdown-menu-left":1,"dropdown-menu-right":0},h.dropdownclick=function(e){var t=n.innerWidth,r=e.clientX;r>.55*t?h.ddclassobj={"dropdown-menu":1,"dropdown-menu-left":0,"dropdown-menu-right":1}:h.ddclassobj={"dropdown-menu":1,"dropdown-menu-left":1,"dropdown-menu-right":0}},h.currentDelID,h.deleteIdeaPopup=function(e){h.currentDelID=e,$("#DeleteIdea").modal("toggle")},h.deleteIdea=function(e){t.post("api/ideas/",{file_id:e,"delete":1}).then(function(e){h.getIdeas(),$("#DeleteIdea").modal("toggle")},function(e){$("#DeleteIdea").modal("toggle"),$("#ErrorModal").modal("toggle"),$("#ErrorMsg").html(e.data.msg)})}}],controllerAs:"subfolderlistCtrl"}}]),r.directive("cirrusProfile",["$http","UserService","$location",function(t,r,o){return{restrict:"E",templateUrl:"views/cirrusprofile.php",controller:["$http","UserService","$location",function(t,r,o){var a=this;a.profile={},a.loggedin=r.isLoggedIn,a.profile.user_id=r.user_id,a.profile.username=r.username,$("#editprofilebutton").hide(),a.possibleIdeas=[],a.getuserprofile=function(){$("#profileLoading").show(),t.post("api/userprofile/",a.profile).then(function(e){a.profile=e.data;var r=a.profile.join_date.split(/[- :]/),o=new Date(r[0],r[1]-1,r[2],r[3],r[4],r[5]);a.profile.join_date=o,"undefined"===a.profile.privateprofile&&(a.profile.privateprofile=0),a.profile.privateprofile?$("#PrivateProfile").attr("checked",!0):$("#PrivateProfile").attr("checked",!1),$("#profileLoading").hide(),t.post("api/getInterestList/",{}).then(function(e){a.possibleIdeas=e.data,$("#editprofilebutton").show(),a.editProfDialogOpen=function(){$("#editProfile").modal("toggle"),$("#CirrusIdeaInterestSelect").select2(),$("#CirrusIdeaInterestSelect").select2("data",{id:"'INTREST_"+a.profile.interest+"'",text:a.profile.interest})},0==a.profile.mailme?$("#NoMail").attr("checked","checked"):$("#MailMe").attr("checked","checked")},function(e){})},function(e){$("#profileLoading").hide()})},a.getuserprofile(),a.editerr={firstname_errmsg:"",lastname_errmsg:"",about_errmsg:"",interest_errmsg:""},a.updateprofile=function(){var r=$("#aboutU").val().replace(/\'/g,"&#39;");r=r.replace(/\"/g,"&quot;"),r=e(r);var o={updateProf:1,user_id:a.profile.user_id,username:a.profile.username,first_name:a.profile.first_name,last_name:a.profile.last_name,mailMe:$("input:radio[name=mailmeradio]:checked").val(),aboutme:r,interest:a.profile.interest,privateProf:a.profile.privateprofile};t.post("api/userprofile/",o).then(function(e){a.getuserprofile(),$("#editProfile").modal("toggle")},function(e){})},a.goToResetPW=function(){$("#editProfile").modal("toggle"),o.path("/editpassword/user/"+a.profile.username),o.replace()},a.collecterr={firstname_errmsg:"",lastname_errmsg:"",paypalemail_errmsg:""},a.collectDialogOpen=function(){$("#CollectFunds").modal("toggle")},a.collectfunds=function(){var e={user_id:a.profile.user_id,username:a.profile.username,first_name:a.profile.first_name,last_name:a.profile.last_name,paypalemail:a.profile.paypalemail,amount:a.profile.balance};t.post("api/collectfunds/",e).then(function(e){a.getuserprofile(),$("#CollectFunds").modal("toggle")},function(e){a.collecterr=e.data})}}],controllerAs:"cirrusProfileCtrl"}}]),r.directive("cirrusMyideas",["$http","UserService","$window",function(e,t,r){return{restrict:"E",templateUrl:"views/cirrususerideas.php",controller:["$http","UserService","$window",function(e,t,r){var o=this;o.profile={},o.loggedin=t.isLoggedIn,o.profile.user_id=t.user_id,o.profile.username=t.username,t.session().then(function(e){o.profile=e.data,o.loggedin=e.data.isLoggedIn},function(e){}),o.thoughts={},o.getownThoughts=function(t){$("#LoadingOwnthoughts").show(),e.post("api/userthoughts/",{user_id:o.profile.user_id,username:o.profile.username,viewpag:t}).then(function(e){o.thoughts=e.data;for(thought in o.thoughts.thoughtarray){var t=o.thoughts.thoughtarray[thought].date.split(/[- :]/),r=new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5]);o.thoughts.thoughtarray[thought].date=r}$("#LoadingOwnthoughts").hide()},function(e){})},o.showPag=1,o.pagControl=function(e){return r.scroll(0,0),o.showPag=e,e},o.activePag=function(e){return e===o.showPag?{active:1}:{active:0}},o.getownThoughts(o.showPag),o.getIdeas=function(){$("#LoadingOwnideas").show(),e.post("api/userideas/",{user_id:o.profile.user_id}).then(function(e){o.ideas=e.data,$("#LoadingOwnideas").hide()},function(e){$("#LoadingOwnideas").hide()})},o.getIdeas(),o.ddclassobj={"dropdown-menu":1,"dropdown-menu-left":1,"dropdown-menu-right":0},o.dropdownclick=function(e){var t=r.innerWidth,a=e.clientX;a>.55*t?o.ddclassobj={"dropdown-menu":1,"dropdown-menu-left":0,"dropdown-menu-right":1}:o.ddclassobj={"dropdown-menu":1,"dropdown-menu-left":1,"dropdown-menu-right":0}},o.currentDelID,o.deleteIdeaPopup=function(e){o.currentDelID=e,$("#DeleteOwnIdea").modal("toggle")},o.deleteIdea=function(t){e.post("api/ideas/",{file_id:t,"delete":1}).then(function(e){o.getIdeas(),$("#DeleteOwnIdea").modal("toggle")},function(e){$("#DeleteOwnIdea").modal("toggle"),$("#ErrorModal").modal("toggle"),$("#ErrorMsg").html(e.data.msg)})},o.videoplayer=0,o.setvideoplayer=function(e){o.videoplayer=e}}],controllerAs:"cirrusMyIdeasCtrl"}}]),r.directive("cirrusYoumaylike",["$http","UserService","$window",function(e,t,r){return{restrict:"E",templateUrl:"views/cirrusyoumaylike.php",controller:["$http","UserService","$window",function(e,t,r){var o=this;o.profile={},o.thoughts={},o.getyoumaylikethoughtPage=function(t,r){$("#searchingthoughts").show(),e.post("api/thoughtsyoumightlike/",{interest:o.userinterest,page:t,sort:r}).then(function(e){o.thoughts=e.data,$("#searchingthoughts").hide()},function(e){})},t.session().then(function(e){o.loggedin=t.isLoggedIn,o.profile.user_id=t.user_id,o.profile.username=t.username,o.userinterest=t.interest,o.paginationpage=1,o.youmaylikeresultsorder="date DESC",o.getyoumaylikethoughtPage(o.paginationpage,o.searchresultsorder)},function(e){}),o.getyoumaylikethoughtPageSpecial=function(e){o.getyoumaylikethoughtPage(e,o.youmaylikeresultsorder)},o.activePag=function(e){return e===o.paginationpage?{active:1}:{active:0}},o.pagControl=function(e){return r.scroll(0,120),o.paginationpage=e,e},o.setThoughtOrderby=function(e){$("#searchingthoughts").show(),1===e?"date DESC"==o.youmaylikeresultsorder?o.youmaylikeresultsorder="date ASC":o.youmaylikeresultsorder="date DESC":"rating DESC"==o.youmaylikeresultsorder?o.youmaylikeresultsorder="rating ASC":o.youmaylikeresultsorder="rating DESC",o.getyoumaylikethoughtPage(o.paginationpage,o.youmaylikeresultsorder)},o.getThoughtOrderClassSelected=function(e){var t=o.youmaylikeresultsorder;return 1===e?"date DESC"==t||"date ASC"==t?{"glyphicon glyphicon-ok":1}:{"glyphicon glyphicon-remove":1}:"rating DESC"==t||"rating ASC"==t?{"glyphicon glyphicon-ok":1}:{"glyphicon glyphicon-remove":1}},o.getThoughtOrderClassDirection=function(e){var t=o.youmaylikeresultsorder;switch(t){case"date DESC":if(1===e)return{"glyphicon glyphicon-triangle-bottom":1};break;case"date ASC":if(1===e)return{"glyphicon glyphicon-triangle-top":1};break;case"rating DESC":if(2===e)return{"glyphicon glyphicon-triangle-bottom":1};break;case"rating ASC":if(2===e)return{"glyphicon glyphicon-triangle-top":1};break;default:return{"glyphicon glyphicon-menu-left":0}}},o.videoplayer=0,o.setvideoplayer=function(e){o.videoplayer=e}}],controllerAs:"cirrusYouMayLikeCtrl"}}]),r.directive("cirrusChat",["$http","UserService","$window","$sce",function(r,o,a,i){return{restrict:"E",templateUrl:"views/cirruschat.php",controller:["$http","UserService","$window","$sce",function(r,o,a,i){var n=this;n.profile={},n.loggedin=o.isLoggedIn,n.profile.user_id=o.user_id,n.profile.username=o.username,n.chats={},n.getChatStream=function(e,t){r.post("api/chat/",{user_id:n.profile.user_id,username:n.profile.username,pag:e,sort:t}).then(function(e){n.chats=e.data;for(var t=0;t<n.chats.chatarray.length;t++){1===Number(n.chats.chatarray[t].codeok)?n.chats.chatarray[t].comment=i.trustAsHtml(n.chats.chatarray[t].comment):(n.chats.chatarray[t].comment=n.chats.chatarray[t].comment.replace(/&#39;/g,"'"),n.chats.chatarray[t].comment=n.chats.chatarray[t].comment.replace(/&quot;/g,'"'));var r=n.chats.chatarray[t].date.split(/[- :]/),o=new Date(r[0],r[1]-1,r[2],r[3],r[4],r[5]);n.chats.chatarray[t].date=o;for(messg in n.chats.chatarray[t].chatcomments){var a=n.chats.chatarray[t].chatcomments[messg].com_date.split(/[- :]/),h=new Date(a[0],a[1]-1,a[2],a[3],a[4],a[5]);
n.chats.chatarray[t].chatcomments[messg].com_date=h,n.chats.chatarray[t].chatcomments[messg].comment=n.chats.chatarray[t].chatcomments[messg].comment.replace(/&#39;/g,"'"),n.chats.chatarray[t].chatcomments[messg].comment=n.chats.chatarray[t].chatcomments[messg].comment.replace(/&quot;/g,'"')}}},function(e){})},n.chatformokay=function(){var e=t(n.newcomment),r=t(n.newcomment_to_membername);return e||r?!1:!0},n.chatBackformokay=function(e){var r=$("#chatbackTextarea_"+e).val();return t(r)?!1:!0},n.submitComment=function(){var t=n.newcomment.replace(/\'/g,"&#39;");t=t.replace(/\"/g,"&quot;"),t=e(t);var o={comment:t,post_member_id:n.profile.user_id,to_member_name:n.newcomment_to_membername};r.post("api/chat/",o).then(function(e){n.paginationpage=1,n.chatresultsorder="comment_date DESC",n.getChatStream(n.paginationpage,n.chatresultsorder),n.newcomment="",n.newcomment_to_membername=[],$("#chatCoDevSelect").val(null).trigger("change"),$("#chatCoDevSelect").select2()},function(e){})},n.paginationpage=1,n.chatresultsorder="comment_date DESC",n.getChatStream(n.paginationpage,n.chatresultsorder),n.getChatStreamSpecial=function(e){n.getChatStream(e,n.chatresultsorder)},n.activePag=function(e){return e===n.paginationpage?{active:1}:{active:0}},n.pagControl=function(e){return a.scroll(0,120),n.paginationpage=e,e},r.post("api/codevs/",{user_id:n.profile.user_id,username:n.profile.username,getlist:1}).then(function(e){n.usercodves=e.data,$("#codevloading").hide(),$("#chatCoDevSelect").select2()},function(e){}),n.setChatOrderby=function(){$("#searchingthoughts").show(),"comment_date DESC"==n.chatresultsorder?n.chatresultsorder="comment_date ASC":n.chatresultsorder="comment_date DESC",n.getChatStream(n.paginationpage,n.chatresultsorder)},n.getChatOrderClassDirection=function(){var e=n.chatresultsorder;switch(e){case"comment_date DESC":return{"glyphicon glyphicon-triangle-bottom":1};case"comment_date ASC":return{"glyphicon glyphicon-triangle-top":1};default:return{"glyphicon glyphicon-menu-left":0}}},n.chatcomment_toggleIT=function(e){0==n.chats.chatarray[e].chatcomment_toggle?n.chats.chatarray[e].chatcomment_toggle=1:n.chats.chatarray[e].chatcomment_toggle=0},n.addchatComment=function(t,o,a,i){var h=$(t.target).closest(".chatbackForm").find("textarea").val(),s=h.replace(/\'/g,"&#39;");s=s.replace(/\"/g,"&quot;"),s=e(s);var u={comment:s,post_member_id:n.profile.user_id,to_member_name:[a],retocomment:o};r.post("api/chat/",u).then(function(e){n.paginationpage=1,n.chatresultsorder="comment_date DESC",n.getChatStream(n.paginationpage,n.chatresultsorder)},function(e){})}}],controllerAs:"cirrusChatCtrl"}}]),r.directive("cirrusQuicklinks",["$http","UserService","$window",function(e,t,r){return{restrict:"E",templateUrl:"views/cirrusquicklinks.php",controller:["$http","UserService","$window",function(e,t,r){var o=this;o.profile={},o.loggedin=t.isLoggedIn,t.session().then(function(e){o.profile.user_id=e.data.user_id,o.profile.username=e.data.username,o.getuserquicklinks()},function(e){}),$("#quicklinkloading").show(),o.getuserquicklinks=function(){$("#quicklinkloading").show(),e.post("api/quicklink/",{user_id:o.profile.user_id,username:o.profile.username,getlist:1}).then(function(e){o.qlinklist=e.data,$("#quicklinkloading").hide()},function(e){})},o.ddclassobj={"dropdown-menu":1,"dropdown-menu-left":1,"dropdown-menu-right":0},o.dropdownclick=function(e){var t=r.innerWidth,a=e.clientX;a>.55*t?o.ddclassobj={"dropdown-menu":1,"dropdown-menu-left":0,"dropdown-menu-right":1}:o.ddclassobj={"dropdown-menu":1,"dropdown-menu-left":1,"dropdown-menu-right":0}},o.deleteQuicklinkPopup=function(e){o.currentQLDelID=e,$("#DeleteQuicklink").modal("toggle")},o.deleteQuicklink=function(t){e.post("api/quicklink/",{quicklink_id:t,"delete":1}).then(function(e){o.getuserquicklinks(),$("#DeleteQuicklink").modal("toggle")},function(e){})}}],controllerAs:"cirrusQuicklinkCtrl"}}]),r.directive("cirrusCodevs",["$http","UserService","$window",function(e,t,r){return{restrict:"E",templateUrl:"views/cirruscodevs.php",controller:["$http","UserService","$window",function(e,t,r){var o=this;o.profile={},o.loggedin=t.isLoggedIn,o.profile.user_id=t.user_id,o.profile.username=t.username,o.getuserCoDevs=function(){$("#codevloading").show(),e.post("api/codevs/",{user_id:o.profile.user_id,username:o.profile.username,getlist:1}).then(function(e){o.codevlist=e.data,$("#codevloading").hide()},function(e){})},o.getuserCoDevs(),o.ddclassobj={"dropdown-menu":1,"dropdown-menu-left":1,"dropdown-menu-right":0},o.dropdownclick=function(e){var t=r.innerWidth,a=e.clientX;a>.55*t?o.ddclassobj={"dropdown-menu":1,"dropdown-menu-left":0,"dropdown-menu-right":1}:o.ddclassobj={"dropdown-menu":1,"dropdown-menu-left":1,"dropdown-menu-right":0}},o.deleteCoDevPopup=function(e){o.currentCDDelID=e,$("#DeleteCodev").modal("toggle")},o.deleteCodev=function(t){e.post("api/codevs/",{codev_id:t,"delete":1}).then(function(e){o.getuserCoDevs(),$("#DeleteCodev").modal("toggle")},function(e){})}}],controllerAs:"cirrusCoDevsCtrl"}}]),r.directive("cirrusSearchideas",["$http","UserService","$routeParams","$window","SearchTabService",function(e,t,r,o,a){return{restrict:"E",templateUrl:"views/searchideas.php",controller:["$http","UserService","$routeParams","$window","SearchTabService",function(e,t,r,o,a){var i=this;i.profile={},i.loggedin=t.isLoggedIn,i.profile.user_id=t.user_id,i.profile.username=t.username,i.searchterm=r.search,i.getsearchIdeaPage=function(t,r){$("#searching").show(),e.post("api/searchideas/",{searchterm:i.searchterm,page:t,sort:r}).then(function(e){i.searchResults=e.data,$("#searching").hide(),i.searchResults.ideaarray.length<1&&a.setSearchTab(2)},function(e){})},i.paginationpage=1,i.getsearchIdeaPage(i.paginationpage,2),i.activePag=function(e){return e===i.paginationpage?{active:1}:{active:0}},i.pagControl=function(e){return o.scroll(0,120),i.paginationpage=e,e}}],controllerAs:"cirrusSearchIdeaCtrl"}}]),r.directive("cirrusSearchthoughts",["$http","UserService","$routeParams","$window","SearchTabService",function(e,t,r,o,a){return{restrict:"E",templateUrl:"views/searchthoughts.php",controller:["$http","UserService","$routeParams","$window","SearchTabService",function(e,t,r,o,a){var i=this;i.profile={},i.loggedin=t.isLoggedIn,i.profile.user_id=t.user_id,i.profile.username=t.username,i.searchterm=r.search,i.thoughts={},i.getsearchthoughtPage=function(t,r){$("#searchingthoughts").show(),e.post("api/searchthoughts/",{searchterm:i.searchterm,page:t,sort:r}).then(function(e){i.thoughts=e.data,$("#searchingthoughts").hide(),i.thoughts.thoughtarray.length<1&&a.setSearchTab(3)},function(e){})},i.paginationpage=1,i.searchresultsorder="date DESC",i.getsearchthoughtPage(i.paginationpage,i.searchresultsorder),i.getsearchthoughtPageSpecial=function(e){i.getsearchthoughtPage(e,i.searchresultsorder)},i.activePag=function(e){return e===i.paginationpage?{active:1}:{active:0}},i.pagControl=function(e){return o.scroll(0,120),i.paginationpage=e,e},i.setThoughtOrderby=function(e){$("#searchingthoughts").show(),1===e?"date DESC"==i.searchresultsorder?i.searchresultsorder="date ASC":i.searchresultsorder="date DESC":"rating DESC"==i.searchresultsorder?i.searchresultsorder="rating ASC":i.searchresultsorder="rating DESC",i.getsearchthoughtPage(i.paginationpage,i.searchresultsorder)},i.getThoughtOrderClassSelected=function(e){var t=i.searchresultsorder;return 1===e?"date DESC"==t||"date ASC"==t?{"glyphicon glyphicon-ok":1}:{"glyphicon glyphicon-remove":1}:"rating DESC"==t||"rating ASC"==t?{"glyphicon glyphicon-ok":1}:{"glyphicon glyphicon-remove":1}},i.getThoughtOrderClassDirection=function(e){var t=i.searchresultsorder;switch(t){case"date DESC":if(1===e)return{"glyphicon glyphicon-triangle-bottom":1};break;case"date ASC":if(1===e)return{"glyphicon glyphicon-triangle-top":1};break;case"rating DESC":if(2===e)return{"glyphicon glyphicon-triangle-bottom":1};break;case"rating ASC":if(2===e)return{"glyphicon glyphicon-triangle-top":1};break;default:return{"glyphicon glyphicon-menu-left":0}}}}],controllerAs:"cirrusSearchThoughtCtrl"}}]),r.directive("cirrusSearchmembers",["$http","UserService","$routeParams","$window",function(e,t,r,o){return{restrict:"E",templateUrl:"views/searchmembers.php",controller:["$http","UserService","$routeParams","$window",function(e,t,r,o){var a=this;a.profile={},a.loggedin=t.isLoggedIn,a.profile.user_id=t.user_id,a.profile.username=t.username,a.searchterm=r.search,a.getsearchMemberPage=function(t,r){$("#searchingmembers").show(),e.post("api/searchmembers/",{searchterm:a.searchterm,page:t,sort:r}).then(function(e){a.searchResults=e.data,$("#searchingmembers").hide()},function(e){})},a.paginationpage=1,a.searchresultsorder="username ASC",a.getsearchMemberPage(a.paginationpage,a.searchresultsorder),a.getsearchMemberPageSpecial=function(e){a.getsearchMemberPage(e,a.searchresultsorder)},a.activePag=function(e){return e===a.paginationpage?{active:1}:{active:0}},a.pagControl=function(e){return o.scroll(0,120),a.paginationpage=e,e},a.setMemberOrderby=function(e){$("#searchingmembers").show(),1===e?"username DESC"==a.searchresultsorder?a.searchresultsorder="username ASC":a.searchresultsorder="username DESC":"cred DESC"==a.searchresultsorder?a.searchresultsorder="cred ASC":a.searchresultsorder="cred DESC",a.getsearchMemberPage(a.paginationpage,a.searchresultsorder)},a.getMemberOrderClassSelected=function(e){var t=a.searchresultsorder;return 1===e?"username DESC"==t||"username ASC"==t?{"glyphicon glyphicon-ok":1}:{"glyphicon glyphicon-remove":1}:"cred DESC"==t||"cred ASC"==t?{"glyphicon glyphicon-ok":1}:{"glyphicon glyphicon-remove":1}},a.getMemberOrderClassDirection=function(e){var t=a.searchresultsorder;switch(t){case"username DESC":if(1===e)return{"glyphicon glyphicon-triangle-bottom":1};break;case"username ASC":if(1===e)return{"glyphicon glyphicon-triangle-top":1};break;case"cred DESC":if(2===e)return{"glyphicon glyphicon-triangle-bottom":1};break;case"cred ASC":if(2===e)return{"glyphicon glyphicon-triangle-top":1};break;default:return{"glyphicon glyphicon-menu-left":0}}}}],controllerAs:"cirrusSearchMemberCtrl"}}])}();